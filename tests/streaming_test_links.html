<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µã‚¤ãƒˆ PiP ãƒ†ã‚¹ãƒˆãƒªãƒ³ã‚¯</title>
    <style>
      body {
        font-family: "Arial", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        margin: 0;
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
        font-size: 2.5em;
        font-weight: 300;
      }

      .test-section {
        margin-bottom: 40px;
        padding: 25px;
        background: #f8f9fa;
        border-radius: 10px;
        border-left: 5px solid #007bff;
      }

      .test-section h2 {
        color: #333;
        margin-bottom: 20px;
        font-size: 1.5em;
      }

      .link-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }

      .test-link {
        display: block;
        padding: 15px 20px;
        background: linear-gradient(135deg, #ff6b6b, #ee5a24);
        color: white;
        text-decoration: none;
        border-radius: 8px;
        transition: all 0.3s ease;
        text-align: center;
        font-weight: 500;
      }

      .test-link:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .youtube-link {
        background: linear-gradient(135deg, #ff0000, #cc0000);
      }

      .tver-link {
        background: linear-gradient(135deg, #00a8cc, #0077aa);
      }

      .instructions {
        background: #e8f4fd;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #2196f3;
        margin-bottom: 20px;
      }

      .instructions h3 {
        margin-top: 0;
        color: #1976d2;
      }

      .instructions ol {
        margin: 10px 0;
        padding-left: 20px;
      }

      .instructions li {
        margin-bottom: 8px;
        line-height: 1.5;
      }

      .debug-section {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 8px;
        padding: 20px;
        margin-top: 30px;
      }

      .debug-section h3 {
        color: #856404;
        margin-top: 0;
      }

      .debug-button {
        display: inline-block;
        padding: 10px 20px;
        background: #ffc107;
        color: #212529;
        text-decoration: none;
        border-radius: 5px;
        margin: 5px;
        transition: background 0.3s ease;
        font-weight: 500;
      }

      .debug-button:hover {
        background: #e0a800;
      }

      .keyboard-shortcuts {
        background: #d4edda;
        border: 1px solid #c3e6cb;
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
      }

      .keyboard-shortcuts h3 {
        color: #155724;
        margin-top: 0;
      }

      .shortcut-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid #c3e6cb;
      }

      .shortcut-item:last-child {
        border-bottom: none;
      }

      .shortcut-key {
        background: #28a745;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-family: monospace;
        font-size: 0.9em;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ¥ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µã‚¤ãƒˆ PiP ãƒ†ã‚¹ãƒˆ</h1>

      <div class="instructions">
        <h3>ğŸ“‹ ãƒ†ã‚¹ãƒˆæ‰‹é †</h3>
        <ol>
          <li>ä¸‹è¨˜ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å„ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹</li>
          <li>å‹•ç”»ã‚’å†ç”Ÿé–‹å§‹</li>
          <li>
            ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ <strong>Ctrl+P</strong> (macOS: Cmd+P)
            ã§PiPæ©Ÿèƒ½ã‚’å®Ÿè¡Œ
          </li>
          <li>PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒæ­£ã—ãé–‹ãã‹ã‚’ç¢ºèª</li>
          <li>å•é¡ŒãŒã‚ã‚‹å ´åˆã¯ã€ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’ç¢ºèª</li>
        </ol>
      </div>

      <div class="test-section">
        <h2>ğŸ”´ YouTube ãƒ†ã‚¹ãƒˆ</h2>
        <div class="link-grid">
          <a
            href="https://www.youtube.com/watch?v=dQw4w9WgXcQ"
            class="test-link youtube-link"
            target="_blank"
          >
            YouTube - ä¸€èˆ¬çš„ãªå‹•ç”»
          </a>
          <a
            href="https://www.youtube.com/watch?v=jNQXAC9IVRw"
            class="test-link youtube-link"
            target="_blank"
          >
            YouTube - çŸ­ã„å‹•ç”»
          </a>
          <a
            href="https://www.youtube.com/watch?v=9bZkp7q19f0"
            class="test-link youtube-link"
            target="_blank"
          >
            YouTube - é•·æ™‚é–“å‹•ç”»
          </a>
        </div>
      </div>

      <div class="test-section">
        <h2>ğŸ“º TVar ãƒ†ã‚¹ãƒˆ</h2>
        <div class="link-grid">
          <a
            href="https://tver.jp/"
            class="test-link tver-link"
            target="_blank"
          >
            TVar - ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
          </a>
          <a
            href="https://tver.jp/episodes/602d7e7d35f4b73a8a5c92c8"
            class="test-link tver-link"
            target="_blank"
          >
            TVar - ã‚µãƒ³ãƒ—ãƒ«ç•ªçµ„1
          </a>
          <a
            href="https://tver.jp/corner/f0089694"
            class="test-link tver-link"
            target="_blank"
          >
            TVar - ã‚µãƒ³ãƒ—ãƒ«ç•ªçµ„2
          </a>
        </div>
      </div>

      <div class="test-section">
        <h2>ğŸŒ ãã®ä»–ã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µã‚¤ãƒˆ</h2>
        <div class="link-grid">
          <a href="https://www.netflix.com/" class="test-link" target="_blank">
            Netflix
          </a>
          <a
            href="https://www.amazon.co.jp/gp/video/"
            class="test-link"
            target="_blank"
          >
            Amazon Prime Video
          </a>
          <a href="https://www.hulu.jp/" class="test-link" target="_blank">
            Hulu
          </a>
        </div>
      </div>

      <div class="keyboard-shortcuts">
        <h3>âŒ¨ï¸ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ</h3>
        <div class="shortcut-item">
          <span>PiPæ©Ÿèƒ½å®Ÿè¡Œ</span>
          <span class="shortcut-key">Ctrl+P / Cmd+P</span>
        </div>
        <div class="shortcut-item">
          <span>å…¨PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦çµ‚äº†</span>
          <span class="shortcut-key">Ctrl+Shift+P</span>
        </div>
        <div class="shortcut-item">
          <span>ãƒ‡ãƒãƒƒã‚°æƒ…å ±è¡¨ç¤º</span>
          <span class="shortcut-key">Ctrl+Alt+P</span>
        </div>
      </div>

      <div class="debug-section">
        <h3>ğŸ”§ ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½</h3>
        <p>
          PiPæ©Ÿèƒ½ãŒã†ã¾ãå‹•ä½œã—ãªã„å ´åˆã€ä»¥ä¸‹ã®ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ï¼š
        </p>
        <a
          href="javascript:void(0)"
          class="debug-button"
          onclick="showDebugInfo()"
          >ãƒ‡ãƒãƒƒã‚°æƒ…å ±è¡¨ç¤º</a
        >
        <a
          href="javascript:void(0)"
          class="debug-button"
          onclick="testVideoDetection()"
          >å‹•ç”»æ¤œå‡ºãƒ†ã‚¹ãƒˆ</a
        >
        <a href="javascript:void(0)" class="debug-button" onclick="exitAllPiP()"
          >å…¨PiPçµ‚äº†</a
        >
        <a
          href="javascript:void(0)"
          class="debug-button"
          onclick="monitorPerformance()"
          >ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–</a
        >
      </div>
    </div>

    <script>
      // ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½
      function showDebugInfo() {
        if (typeof window.showPiPDebugInfo === "function") {
          window.showPiPDebugInfo();
        } else {
          alert(
            "PiPãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚ãƒšãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã¿ç›´ã—ã¦ãã ã•ã„ã€‚"
          );
        }
      }

      function testVideoDetection() {
        const videos = document.querySelectorAll("video");
        let debugInfo = `æ¤œå‡ºã•ã‚ŒãŸå‹•ç”»è¦ç´ : ${videos.length}å€‹\n\n`;

        videos.forEach((video, index) => {
          debugInfo += `å‹•ç”» ${index + 1}:\n`;
          debugInfo += `- src: ${video.src || "ãªã—"}\n`;
          debugInfo += `- currentSrc: ${video.currentSrc || "ãªã—"}\n`;
          debugInfo += `- readyState: ${video.readyState}\n`;
          debugInfo += `- paused: ${video.paused}\n`;
          debugInfo += `- muted: ${video.muted}\n`;
          debugInfo += `- disablePictureInPicture: ${video.disablePictureInPicture}\n`;
          debugInfo += `- ã‚µã‚¤ã‚º: ${video.videoWidth}x${video.videoHeight}\n`;
          debugInfo += `- å¯è¦–æ€§: ${
            video.offsetWidth > 0 && video.offsetHeight > 0
          }\n\n`;
        });

        alert(debugInfo);
      }

      function exitAllPiP() {
        if (typeof window.exitAllPiP === "function") {
          window.exitAllPiP();
          alert("å…¨ã¦ã®PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’çµ‚äº†ã—ã¾ã—ãŸã€‚");
        } else {
          alert("PiPçµ‚äº†æ©Ÿèƒ½ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚");
        }
      }

      function monitorPerformance() {
        if (typeof window.monitorPiPPerformance === "function") {
          window.monitorPiPPerformance();
          alert(
            "ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ã”ç¢ºèªãã ã•ã„ã€‚"
          );
        } else {
          alert("ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–æ©Ÿèƒ½ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚");
        }
      }

      // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
      document.addEventListener("DOMContentLoaded", function () {
        console.log("ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µã‚¤ãƒˆ PiP ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ");
        console.log("åˆ©ç”¨å¯èƒ½ãªãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½:");
        console.log("- showPiPDebugInfo()", typeof window.showPiPDebugInfo);
        console.log("- exitAllPiP()", typeof window.exitAllPiP);
        console.log(
          "- monitorPiPPerformance()",
          typeof window.monitorPiPPerformance
        );
      });
    </script>
  </body>
</html>
