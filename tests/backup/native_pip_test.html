<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ãƒã‚¤ãƒ†ã‚£ãƒ–PiPæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</title>
    <style>
      body {
        font-family: "Arial", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        margin: 0;
        padding: 20px;
        color: white;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.1);
        padding: 30px;
        border-radius: 20px;
        backdrop-filter: blur(10px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }

      h1 {
        text-align: center;
        margin-bottom: 30px;
        font-size: 2.5em;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .section {
        margin: 30px 0;
        padding: 20px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .section h2 {
        color: #ffd700;
        margin-bottom: 15px;
        font-size: 1.5em;
      }

      .test-image {
        width: 300px;
        height: 200px;
        border-radius: 10px;
        margin: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      .test-image:hover {
        transform: scale(1.05);
      }

      .test-video {
        width: 400px;
        height: 225px;
        border-radius: 10px;
        margin: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      }

      .instructions {
        background: rgba(255, 215, 0, 0.2);
        padding: 15px;
        border-radius: 10px;
        border-left: 4px solid #ffd700;
        margin: 20px 0;
      }

      .key-combo {
        background: rgba(0, 0, 0, 0.3);
        padding: 5px 10px;
        border-radius: 5px;
        font-family: monospace;
        font-weight: bold;
        color: #ffd700;
      }

      .element-test {
        background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        margin: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1.2em;
        font-weight: bold;
      }

      .element-test:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      }

      .image-gallery {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
        margin: 20px 0;
      }

      .sample-content {
        background: rgba(255, 255, 255, 0.15);
        padding: 15px;
        border-radius: 10px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ¬ ãƒã‚¤ãƒ†ã‚£ãƒ–Picture-in-Pictureæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>

      <div class="instructions">
        <h3>ğŸ“‹ ä½¿ç”¨æ–¹æ³•</h3>
        <p>
          ä»¥ä¸‹ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ãƒã‚¤ãƒ†ã‚£ãƒ–PiPæ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã§ãã¾ã™ï¼š
        </p>
        <ul>
          <li>
            <span class="key-combo">Ctrl+Alt+I</span> -
            ç”»åƒã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–PiPã§é–‹ã
          </li>
          <li>
            <span class="key-combo">Ctrl+Alt+V</span> -
            å‹•ç”»ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–PiPã§é–‹ã
          </li>
          <li>
            <span class="key-combo">Ctrl+Alt+E</span> -
            è¦ç´ ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–PiPã§é–‹ã
          </li>
          <li>
            <span class="key-combo">Ctrl+Alt+S</span> -
            ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ç”»åƒPiPï¼ˆåˆ¥ãƒ—ãƒ­ã‚»ã‚¹ã€macOS Spaceså¯¾å¿œï¼‰
          </li>
          <li>
            <span class="key-combo">Ctrl+Alt+X</span> -
            å…¨ã¦ã®ãƒã‚¤ãƒ†ã‚£ãƒ–PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã‚‹
          </li>
        </ul>
        <p>
          ã¾ãŸã¯ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã®ã€ŒViewã€â†’ã€ŒNative
          Picture-in-Pictureã€ã‹ã‚‰ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚
        </p>
      </div>

      <div class="section">
        <h2>ğŸ–¼ï¸ ç”»åƒãƒ†ã‚¹ãƒˆ</h2>
        <p>
          ä»¥ä¸‹ã®ç”»åƒã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠã—ã€<span class="key-combo"
            >Ctrl+Alt+I</span
          >ã§ãƒã‚¤ãƒ†ã‚£ãƒ–PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§é–‹ãã“ã¨ãŒã§ãã¾ã™ã€‚
        </p>
        <div class="image-gallery">
          <img
            src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect width='300' height='200' fill='%23ff6b6b'/%3E%3Ctext x='150' y='100' text-anchor='middle' dy='0.35em' font-family='Arial' font-size='20' fill='white'%3Eç¾ã—ã„å¤•æ—¥%3C/text%3E%3C/svg%3E"
            alt="ç¾ã—ã„å¤•æ—¥"
            class="test-image"
            onclick="selectImage(this)"
          />
          <img
            src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect width='300' height='200' fill='%234ecdc4'/%3E%3Ctext x='150' y='100' text-anchor='middle' dy='0.35em' font-family='Arial' font-size='20' fill='white'%3Eç¾ã—ã„æµ·%3C/text%3E%3C/svg%3E"
            alt="ç¾ã—ã„æµ·"
            class="test-image"
            onclick="selectImage(this)"
          />
          <img
            src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect width='300' height='200' fill='%2345b7d1'/%3E%3Ctext x='150' y='100' text-anchor='middle' dy='0.35em' font-family='Arial' font-size='20' fill='white'%3Eç¾ã—ã„ç©º%3C/text%3E%3C/svg%3E"
            alt="ç¾ã—ã„ç©º"
            class="test-image"
            onclick="selectImage(this)"
          />
        </div>
      </div>

      <div class="section">
        <h2>ğŸ¥ å‹•ç”»ãƒ†ã‚¹ãƒˆ</h2>
        <p>
          å‹•ç”»è¦ç´ ã‚’é¸æŠã—ã€<span class="key-combo">Ctrl+Alt+V</span
          >ã§ãƒã‚¤ãƒ†ã‚£ãƒ–PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§é–‹ãã“ã¨ãŒã§ãã¾ã™ã€‚
        </p>
        <video
          class="test-video"
          controls
          onclick="selectVideo(this)"
          width="400"
          height="225"
        >
          <!-- HTML5 Canvasç”Ÿæˆãƒ“ãƒ‡ã‚ªï¼ˆJavaScriptç”Ÿæˆï¼‰ -->
          <source id="canvasVideoSource" type="video/mp4" />
          <p>ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å‹•ç”»ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚</p>
        </video>
        <div class="sample-content">
          <h4>ğŸ¬ ãƒ†ã‚¹ãƒˆç”¨å‹•ç”»ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿</h4>
          <button
            onclick="generateTestVideo()"
            style="
              padding: 10px 20px;
              background: #4ecdc4;
              color: white;
              border: none;
              border-radius: 5px;
              cursor: pointer;
              font-size: 14px;
            "
          >
            ãƒ†ã‚¹ãƒˆå‹•ç”»ã‚’ç”Ÿæˆ
          </button>
          <p id="videoStatus">
            ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ†ã‚¹ãƒˆç”¨å‹•ç”»ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„
          </p>
        </div>
      </div>

      <div class="section">
        <h2>ğŸ¯ è¦ç´ ãƒ†ã‚¹ãƒˆ</h2>
        <p>
          ä»¥ä¸‹ã®è¦ç´ ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠã—ã€<span class="key-combo"
            >Ctrl+Alt+E</span
          >ã§ãƒã‚¤ãƒ†ã‚£ãƒ–PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§é–‹ãã“ã¨ãŒã§ãã¾ã™ã€‚
        </p>
        <div class="element-test" onclick="selectElement(this)">
          <h3>ğŸŒŸ ç‰¹åˆ¥ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h3>
          <p>ã“ã®ãƒœãƒƒã‚¯ã‚¹å…¨ä½“ã‚’Picture-in-Pictureã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§è¡¨ç¤ºã§ãã¾ã™ï¼</p>
          <p>ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœä»˜ã</p>
        </div>

        <div class="sample-content" onclick="selectElement(this)">
          <h4>ğŸ“Š ã‚µãƒ³ãƒ—ãƒ«ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h4>
          <p>é€²è¡ŒçŠ¶æ³: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%</p>
          <p>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: âœ… æ­£å¸¸</p>
          <p>æœ€çµ‚æ›´æ–°: 2025å¹´6æœˆ8æ—¥</p>
        </div>
      </div>

      <div class="section">
        <h2>âš™ï¸ ãƒ†ã‚¹ãƒˆæ‰‹é †</h2>
        <ol>
          <li>ä¸Šè¨˜ã®ç”»åƒã€å‹•ç”»ã€ã¾ãŸã¯è¦ç´ ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠã—ã¾ã™</li>
          <li>
            å¯¾å¿œã™ã‚‹ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’æŠ¼ã—ã¾ã™ï¼š
            <ul>
              <li>ç”»åƒ: <span class="key-combo">Ctrl+Alt+I</span></li>
              <li>å‹•ç”»: <span class="key-combo">Ctrl+Alt+V</span></li>
              <li>è¦ç´ : <span class="key-combo">Ctrl+Alt+E</span></li>
            </ul>
          </li>
          <li>æ–°ã—ã„ãƒã‚¤ãƒ†ã‚£ãƒ–PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒé–‹ãã“ã¨ã‚’ç¢ºèªã—ã¾ã™</li>
          <li>PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ãƒ‰ãƒ©ãƒƒã‚°ç§»å‹•ã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™</li>
          <li>æœ€å°åŒ–ãƒ»é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ãŒæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™</li>
          <li>
            <span class="key-combo">Ctrl+Alt+X</span
            >ã§å…¨ã¦ã®PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒé–‰ã˜ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™
          </li>
        </ol>
      </div>

      <div class="section">
        <h2>ğŸš€ ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³PiPãƒ†ã‚¹ãƒˆï¼ˆmacOS Spaceså¯¾å¿œï¼‰</h2>
        <p>
          åˆ¥ãƒ—ãƒ­ã‚»ã‚¹ã§å‹•ä½œã™ã‚‹PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚macOSã®Spacesé–“ã§ã‚‚è¡¨ç¤ºã•ã‚Œç¶šã‘ã¾ã™ã€‚
          <span class="key-combo">Ctrl+Alt+S</span
          >ã‚’æŠ¼ã—ã¦ã‹ã‚‰ç”»åƒã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚
        </p>
        <div class="image-gallery">
          <img
            src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect width='300' height='200' fill='%23e74c3c'/%3E%3Ctext x='150' y='100' text-anchor='middle' dy='0.35em' font-family='Arial' font-size='16' fill='white'%3Eã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³PiP%3C/text%3E%3Ctext x='150' y='130' text-anchor='middle' dy='0.35em' font-family='Arial' font-size='12' fill='white'%3Eåˆ¥ãƒ—ãƒ­ã‚»ã‚¹å®Ÿè¡Œ%3C/text%3E%3C/svg%3E"
            alt="ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³PiPãƒ†ã‚¹ãƒˆç”»åƒ"
            class="test-image"
            onclick="selectImage(this)"
          />
          <img
            src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect width='300' height='200' fill='%23f39c12'/%3E%3Ctext x='150' y='100' text-anchor='middle' dy='0.35em' font-family='Arial' font-size='16' fill='white'%3EmacOS Spaces%3C/text%3E%3Ctext x='150' y='130' text-anchor='middle' dy='0.35em' font-family='Arial' font-size='12' fill='white'%3Eå¯¾å¿œãƒ†ã‚¹ãƒˆ%3C/text%3E%3C/svg%3E"
            alt="macOS Spacesãƒ†ã‚¹ãƒˆç”»åƒ"
            class="test-image"
            onclick="selectImage(this)"
          />
        </div>
        <p style="color: #ffd700; font-weight: bold">
          âœ¨ ç‰¹å¾´:
          ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ã¨ã¯ç‹¬ç«‹ã—ãŸãƒ—ãƒ­ã‚»ã‚¹ã§å‹•ä½œã—ã€macOSã®Spacesï¼ˆä»®æƒ³ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼‰é–“ã§ã‚‚ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒè¡¨ç¤ºã•ã‚Œç¶šã‘ã¾ã™ã€‚
        </p>
      </div>

      <div class="section">
        <h2>âš™ï¸ ãƒ†ã‚¹ãƒˆæ‰‹é †</h2>
        <ol>
          <li>ä¸Šè¨˜ã®ç”»åƒã€å‹•ç”»ã€ã¾ãŸã¯è¦ç´ ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠã—ã¾ã™</li>
          <li>
            å¯¾å¿œã™ã‚‹ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’æŠ¼ã—ã¾ã™ï¼š
            <ul>
              <li>ç”»åƒ: <span class="key-combo">Ctrl+Alt+I</span></li>
              <li>å‹•ç”»: <span class="key-combo">Ctrl+Alt+V</span></li>
              <li>è¦ç´ : <span class="key-combo">Ctrl+Alt+E</span></li>
            </ul>
          </li>
          <li>æ–°ã—ã„ãƒã‚¤ãƒ†ã‚£ãƒ–PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒé–‹ãã“ã¨ã‚’ç¢ºèªã—ã¾ã™</li>
          <li>PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ãƒ‰ãƒ©ãƒƒã‚°ç§»å‹•ã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™</li>
          <li>æœ€å°åŒ–ãƒ»é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ãŒæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™</li>
          <li>
            <span class="key-combo">Ctrl+Alt+X</span
            >ã§å…¨ã¦ã®PiPã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒé–‰ã˜ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™
          </li>
        </ol>
      </div>
    </div>

    <script>
      let selectedElement = null;

      function selectImage(img) {
        clearSelection();
        img.style.border = "3px solid #FFD700";
        img.style.boxShadow = "0 0 20px rgba(255, 215, 0, 0.7)";
        selectedElement = img;
        console.log("ç”»åƒãŒé¸æŠã•ã‚Œã¾ã—ãŸ:", img.alt);
      }

      function selectVideo(video) {
        clearSelection();
        video.style.border = "3px solid #FFD700";
        video.style.boxShadow = "0 0 20px rgba(255, 215, 0, 0.7)";
        selectedElement = video;
        console.log("å‹•ç”»ãŒé¸æŠã•ã‚Œã¾ã—ãŸ");
      }

      function selectElement(element) {
        clearSelection();
        element.style.border = "3px solid #FFD700";
        element.style.boxShadow = "0 0 20px rgba(255, 215, 0, 0.7)";
        selectedElement = element;
        console.log(
          "è¦ç´ ãŒé¸æŠã•ã‚Œã¾ã—ãŸ:",
          element.textContent.substring(0, 30) + "..."
        );
      }

      function clearSelection() {
        if (selectedElement) {
          selectedElement.style.border = "";
          selectedElement.style.boxShadow = "";
        }
        selectedElement = null;
      }

      // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã®ãƒ­ã‚°å‡ºåŠ›
      document.addEventListener("keydown", function (event) {
        if (event.ctrlKey && event.altKey) {
          switch (event.key) {
            case "I":
              console.log(
                "ãƒã‚¤ãƒ†ã‚£ãƒ–ç”»åƒPiPã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãŒæŠ¼ã•ã‚Œã¾ã—ãŸ (Ctrl+Alt+I)"
              );
              break;
            case "V":
              console.log(
                "ãƒã‚¤ãƒ†ã‚£ãƒ–å‹•ç”»PiPã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãŒæŠ¼ã•ã‚Œã¾ã—ãŸ (Ctrl+Alt+V)"
              );
              break;
            case "E":
              console.log(
                "ãƒã‚¤ãƒ†ã‚£ãƒ–è¦ç´ PiPã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãŒæŠ¼ã•ã‚Œã¾ã—ãŸ (Ctrl+Alt+E)"
              );
              break;
            case "X":
              console.log(
                "å…¨ãƒã‚¤ãƒ†ã‚£ãƒ–PiPé–‰ã˜ã‚‹ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãŒæŠ¼ã•ã‚Œã¾ã—ãŸ (Ctrl+Alt+X)"
              );
              break;
          }
        }
      });

      console.log("ğŸ¬ ãƒã‚¤ãƒ†ã‚£ãƒ–PiPãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ");
      console.log("ä½¿ç”¨å¯èƒ½ãªã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ:");
      console.log("  Ctrl+Alt+I - ãƒã‚¤ãƒ†ã‚£ãƒ–ç”»åƒPiP");
      console.log("  Ctrl+Alt+V - ãƒã‚¤ãƒ†ã‚£ãƒ–å‹•ç”»PiP");
      console.log("  Ctrl+Alt+E - ãƒã‚¤ãƒ†ã‚£ãƒ–è¦ç´ PiP");
      console.log("  Ctrl+Alt+X - å…¨ãƒã‚¤ãƒ†ã‚£ãƒ–PiPé–‰ã˜ã‚‹");

      // ãƒ†ã‚¹ãƒˆç”¨å‹•ç”»ç”Ÿæˆæ©Ÿèƒ½
      function generateTestVideo() {
        const canvas = document.createElement("canvas");
        canvas.width = 400;
        canvas.height = 225;
        const ctx = canvas.getContext("2d");

        // å‹•ç”»ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä½œæˆ
        const stream = canvas.captureStream(30); // 30fps

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æç”»
        let frame = 0;
        function drawFrame() {
          // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯
          const gradient = ctx.createLinearGradient(
            0,
            0,
            canvas.width,
            canvas.height
          );
          gradient.addColorStop(0, `hsl(${(frame * 2) % 360}, 70%, 50%)`);
          gradient.addColorStop(1, `hsl(${(frame * 2 + 120) % 360}, 70%, 30%)`);

          ctx.fillStyle = gradient;
          ctx.fillRect(0, 0, canvas.width, canvas.height);

          // å›è»¢ã™ã‚‹å††
          ctx.save();
          ctx.translate(canvas.width / 2, canvas.height / 2);
          ctx.rotate((frame * 0.02) % (2 * Math.PI));

          ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
          ctx.beginPath();
          ctx.arc(0, -50, 30, 0, 2 * Math.PI);
          ctx.fill();

          ctx.restore();

          // ãƒ†ã‚­ã‚¹ãƒˆ
          ctx.fillStyle = "white";
          ctx.font = "bold 24px Arial";
          ctx.textAlign = "center";
          ctx.fillText("ãƒ†ã‚¹ãƒˆå‹•ç”»", canvas.width / 2, canvas.height / 2 + 50);

          ctx.font = "16px Arial";
          ctx.fillText(
            `ãƒ•ãƒ¬ãƒ¼ãƒ : ${frame}`,
            canvas.width / 2,
            canvas.height / 2 + 80
          );

          frame++;
          if (frame < 300) {
            // 10ç§’é–“ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ30fpsï¼‰
            requestAnimationFrame(drawFrame);
          }
        }

        drawFrame();

        // MediaRecorderã§å‹•ç”»ã‚’éŒ²ç”»
        const mediaRecorder = new MediaRecorder(stream, {
          mimeType: "video/webm;codecs=vp8",
        });

        const chunks = [];
        mediaRecorder.ondataavailable = function (event) {
          if (event.data.size > 0) {
            chunks.push(event.data);
          }
        };

        mediaRecorder.onstop = function () {
          const blob = new Blob(chunks, { type: "video/webm" });
          const videoUrl = URL.createObjectURL(blob);

          const video = document.querySelector(".test-video");
          video.src = videoUrl;
          video.load();

          document.getElementById("videoStatus").textContent =
            "âœ… ãƒ†ã‚¹ãƒˆå‹•ç”»ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸï¼Ctrl+Alt+Vã§ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚";
          console.log("ãƒ†ã‚¹ãƒˆå‹•ç”»ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸ");
        };

        mediaRecorder.start();
        document.getElementById("videoStatus").textContent =
          "ğŸ¬ å‹•ç”»ã‚’ç”Ÿæˆä¸­...";

        // 10ç§’å¾Œã«éŒ²ç”»åœæ­¢
        setTimeout(() => {
          mediaRecorder.stop();
          stream.getTracks().forEach((track) => track.stop());
        }, 10000);
      }
    </script>
  </body>
</html>
